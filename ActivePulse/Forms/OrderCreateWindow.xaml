<Window x:Class="ActivePulse.Forms.OrderCreateWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="Оформление заказа" 
        Height="600" 
        Width="800"
        WindowStartupLocation="CenterOwner"
        Background="#FF424242">

    <Window.Resources>
        <!-- Общие стили -->
        <Style x:Key="FormLabelStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,10,0,5"/>
        </Style>

        <Style x:Key="FormInputStyle" TargetType="TextBox">
            <Setter Property="Background" Value="#FF555555"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#FF666666"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>

        <Style x:Key="DatePickerStyle" TargetType="DatePicker">
            <Setter Property="Background" Value="#FF555555"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#FF666666"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Margin" Value="0,0,10,10"/>
            <Setter Property="Width" Value="100"/>
            <Setter Property="SelectedDateFormat" Value="Short"/>
        </Style>

        <Style x:Key="RadioButtonStyle" TargetType="RadioButton">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Margin" Value="0,0,10,10"/>
        </Style>

        <Style x:Key="SubmitButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#FFD4A017"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="0,20,0,0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#FFE5B73B"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Стиль для ComboBox с темным фоном -->
        <Style x:Key="DarkComboBoxStyle" TargetType="ComboBox">
            <Setter Property="Background" Value="#FF555555"/>
            <Setter Property="Foreground" Value="#FF555555"/>
            <Setter Property="BorderBrush" Value="#FF666666"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>

        <!-- Стиль для элементов ComboBox -->
        <Style x:Key="DarkComboBoxItemStyle" TargetType="ComboBoxItem">
            <Setter Property="Background" Value="#FF555555"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#FF555555"/>
            <Style.Triggers>
                <Trigger Property="IsHighlighted" Value="True">
                    <Setter Property="Background" Value="#FF666666"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <ControlTemplate x:Key="ComboBoxToggleButton" TargetType="ToggleButton">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="20"/>
                </Grid.ColumnDefinitions>
                <Border x:Name="Border" 
                Grid.ColumnSpan="2"
                Background="#FF555555"
                BorderBrush="#FF666666"
                BorderThickness="1"
                CornerRadius="0"/>
                <Border Grid.Column="0"
                CornerRadius="2,0,0,2" 
                Margin="1" 
                Background="#FF555555" 
                BorderBrush="#FF666666"
                BorderThickness="0,0,1,0"/>
                <Path x:Name="Arrow"
              Grid.Column="1"
              Fill="White"
              HorizontalAlignment="Center"
              VerticalAlignment="Center"
              Data="M 0 0 L 4 4 L 8 0 Z"/>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="ToggleButton.IsMouseOver" Value="true">
                    <Setter TargetName="Border" Property="Background" Value="#FF666666"/>
                </Trigger>
                <Trigger Property="ToggleButton.IsChecked" Value="true">
                    <Setter TargetName="Border" Property="Background" Value="#FF666666"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter TargetName="Border" Property="Background" Value="#FF333333"/>
                    <Setter TargetName="Border" Property="BorderBrush" Value="#FF444444"/>
                    <Setter Property="Foreground" Value="#FF888888"/>
                    <Setter TargetName="Arrow" Property="Fill" Value="#FF888888"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <!-- Стиль для текстового поля ComboBox -->
        <ControlTemplate x:Key="ComboBoxTextBox" TargetType="TextBox">
            <Border x:Name="PART_ContentHost" Focusable="False" Background="#FF555555"/>
        </ControlTemplate>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Способ получения -->
        <TextBlock Text="Способ получения:" 
                   Style="{StaticResource FormLabelStyle}"
                   Grid.Row="0"/>

        <StackPanel Orientation="Horizontal" Grid.Row="1">
            <RadioButton x:Name="PickupRadio" 
                         Content="Самовывоз" 
                         GroupName="DeliveryType" 
                         Style="{StaticResource RadioButtonStyle}"
                         Checked="DeliveryType_Checked"/>
            <RadioButton x:Name="DeliveryRadio" 
                         Content="Доставка" 
                         GroupName="DeliveryType" 
                         Style="{StaticResource RadioButtonStyle}"
                         Checked="DeliveryType_Checked"/>
        </StackPanel>

        <!-- Выбор магазина (видно при самовывозе) -->
        <StackPanel x:Name="PickupPanel" 
                    Grid.Row="2" 
                    Visibility="Collapsed">
            <TextBlock Text="Выберите магазин:" 
                       Style="{StaticResource FormLabelStyle}"/>
            <ComboBox x:Name="StoreComboBox" 
                      Style="{StaticResource DarkComboBoxStyle}"
                      ItemContainerStyle="{StaticResource DarkComboBoxItemStyle}"
                      DisplayMemberPath="StoreName"
                      SelectionChanged="StoreComboBox_SelectionChanged"/>
        </StackPanel>

        <!-- Адрес доставки (видно при доставке) -->
        <StackPanel x:Name="DeliveryPanel" 
                    Grid.Row="2" 
                    Visibility="Collapsed">
            <TextBlock Text="Адрес доставки:" 
                       Style="{StaticResource FormLabelStyle}"/>
            <TextBox x:Name="AddressTextBox" 
                     Style="{StaticResource FormInputStyle}"
                     Height="60" 
                     TextWrapping="Wrap"
                     AcceptsReturn="True"/>
        </StackPanel>

        <!-- Способ оплаты -->
        <TextBlock Text="Способ оплаты:" 
                   Style="{StaticResource FormLabelStyle}"
                   Grid.Row="3"/>

        <StackPanel Orientation="Horizontal" Grid.Row="4">
            <RadioButton x:Name="CashRadio" 
                         Content="Наличными" 
                         GroupName="PaymentType" 
                         Style="{StaticResource RadioButtonStyle}"
                         Checked="PaymentType_Checked"/>
            <RadioButton x:Name="CardRadio" 
                         Content="Картой" 
                         GroupName="PaymentType" 
                         Style="{StaticResource RadioButtonStyle}"
                         Checked="PaymentType_Checked"/>
        </StackPanel>

        <!-- Данные карты (видно при оплате картой) -->
        <StackPanel x:Name="CardPanel" 
                    Grid.Row="5" 
                    Visibility="Collapsed">
            <TextBlock Text="Данные карты:" 
                       Style="{StaticResource FormLabelStyle}"/>
            <TextBox x:Name="CardNumberTextBox" 
                     Style="{StaticResource FormInputStyle}"
                     MaxLength="16"
                     ToolTip="Номер карты (16 цифр)"/>
            <TextBox x:Name="CardHolderTextBox" 
                     Style="{StaticResource FormInputStyle}"
                     ToolTip="Имя владельца карты"/>
            <StackPanel Orientation="Horizontal">
                <DatePicker x:Name="CardExpiryDatePicker"
                           Style="{StaticResource DatePickerStyle}"
                           SelectedDateFormat="Short"
                           ToolTip="Срок действия карты"/>
                <TextBox x:Name="CardCvvTextBox" 
                         Style="{StaticResource FormInputStyle}"
                         Width="60"
                         MaxLength="3"
                         ToolTip="CVV код (3 цифры)"/>
            </StackPanel>
        </StackPanel>

        <!-- Итоговая информация -->
        <StackPanel Grid.Row="6">
            <TextBlock Text="Итоговая информация:" 
                       Style="{StaticResource FormLabelStyle}"/>
            <TextBlock x:Name="TotalTextBlock" 
                       Style="{StaticResource FormLabelStyle}"
                       FontWeight="Bold"/>
            <TextBlock x:Name="DeliveryCostTextBlock" 
                       Style="{StaticResource FormLabelStyle}"/>
            <TextBlock x:Name="FinalTotalTextBlock" 
                       Style="{StaticResource FormLabelStyle}"
                       FontWeight="Bold"
                       Foreground="#FFD4A017"/>
        </StackPanel>

        <!-- Кнопка подтверждения -->
        <Button x:Name="SubmitButton" 
                Content="Подтвердить заказ" 
                Style="{StaticResource SubmitButtonStyle}"
                Grid.Row="8"
                Click="SubmitButton_Click"/>
    </Grid>
</Window>